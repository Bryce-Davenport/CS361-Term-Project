{% extends "base.html" %}
{% block content %}

<div style="display: flex; gap: 40px; align-items: flex-start;">

  <!-- game details  -->
  <div style="flex: 1; max-width: 520px;">
    <h1>{{ game.title }}</h1>
    <img src="{{ url_for('static', filename=game.image) }}"
         alt="{{ game.title }} cover"
         class="detail-cover">

    <p><strong>Price:</strong> ${{ '%.2f'|format(game.price) }}</p>

    {% if game.release_year is defined %}
      <p><strong>Release Year:</strong> {{ game.release_year }}</p>
    {% endif %}

    <p>{{ game.description }}</p>

    <form method="POST">
      <label for="platform">Choose platform:</label>
      <select name="platform" id="platform">
        {% for platform in game.platforms %}
          <option value="{{ platform }}">{{ platform }}</option>
        {% endfor %}
      </select>
      <button type="submit">Add to Cart</button>
    </form>

    <p><a href="{{ url_for('games') }}">Back to Library</a></p>
  </div>

  <!-- reviews panel -->
  <div style="flex: 1; background-color: #777cc9; padding: 20px; border-radius: 8px;">

    <h2>Average Review</h2>

    {% if review_count > 0 and avg_rating is not none %}
      <p>
        <strong>Average Rating:</strong>
        {{ '%.1f'|format(avg_rating) }} ({{ review_count }} reviews)
      </p>
    {% else %}
      <p>
        <strong>Average Rating:</strong>
        No rating yet.
      </p>
    {% endif %}

    <hr>

    <h2>Reviews</h2>

    {% if ratings and ratings|length > 0 %}
      <ul>
        {% for r in ratings %}
          <li>‚≠ê {{ r }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No reviews yet for this game.</p>
    {% endif %}

  </div>

</div>

{% endblock %}


